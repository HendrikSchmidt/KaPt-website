import{S as Y,i as Z,s as ee,k,l as x,m as I,h as d,b as j,g as S,_ as te,d as N,f as g,t as p,q as le,a as P,r as ae,c as E,n as w,J as v,u as re,L as K,$ as se,w as Q,x as R,y as T,z as U,e as L}from"./index-faa1c9d4.js";import{i as M}from"./i18n-5472911a.js";import{s as B}from"./utils-5677564c.js";import{I as W}from"./Image-b80ca624.js";function A(o,t,e){const i=o.slice();return i[2]=t[e],i[4]=e,i}function C(o,t,e){const i=o.slice();return i[5]=t[e],i[7]=e,i}function H(o,t,e){const i=o.slice();return i[8]=t[e],i[10]=e,i}function J(o){let t,e,i;return e=new W({props:{img:o[8].attributes,sizes:`(max-width: 639px) 90vw,
                    (max-width: 767px) 75vw,
                    (max-width: 1023px) 50vw,
                    (max-width: 1279px) 40vw,
                    (max-width: 1535px) 30vw,
                    25vw`,src:"small",lazy:o[4]>2||o[10]>6,classString:"aspect-square object-cover saturate-0 hover:saturate-100"}}),{c(){t=k("div"),Q(e.$$.fragment),this.h()},l(l){t=x(l,"DIV",{class:!0});var n=I(t);R(e.$$.fragment,n),n.forEach(d),this.h()},h(){w(t,"class","flex-none w-2/3 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/5 2xl:w-1/6 mr-8 mb-8 overflow-hidden")},m(l,n){j(l,t,n),T(e,t,null),i=!0},p(l,n){const r={};n&1&&(r.img=l[8].attributes),n&1&&(r.lazy=l[4]>2||l[10]>6),e.$set(r)},i(l){i||(g(e.$$.fragment,l),i=!0)},o(l){p(e.$$.fragment,l),i=!1},d(l){l&&d(t),U(e)}}}function O(o){let t,e,i=o[2].attributes.Plans.data,l=[];for(let r=0;r<i.length;r+=1)l[r]=F(C(o,i,r));const n=r=>p(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();t=L()},l(r){for(let s=0;s<l.length;s+=1)l[s].l(r);t=L()},m(r,s){for(let a=0;a<l.length;a+=1)l[a].m(r,s);j(r,t,s),e=!0},p(r,s){if(s&1){i=r[2].attributes.Plans.data;let a;for(a=0;a<i.length;a+=1){const _=C(r,i,a);l[a]?(l[a].p(_,s),g(l[a],1)):(l[a]=F(_),l[a].c(),g(l[a],1),l[a].m(t.parentNode,t))}for(S(),a=i.length;a<l.length;a+=1)n(a);N()}},i(r){if(!e){for(let s=0;s<i.length;s+=1)g(l[s]);e=!0}},o(r){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)p(l[s]);e=!1},d(r){K(l,r),r&&d(t)}}}function F(o){let t,e,i,l;return e=new W({props:{img:o[5].attributes,sizes:`(max-width: 639px) 90vw,
                      (max-width: 767px) 75vw,
                      (max-width: 1023px) 50vw,
                      (max-width: 1279px) 40vw,
                      (max-width: 1535px) 30vw,
                      25vw`,src:"small",lazy:o[4]>2||o[2].attributes.Images.data.length+o[7]>6,classString:"aspect-square object-cover saturate-0 hover:saturate-100"}}),{c(){t=k("div"),Q(e.$$.fragment),i=P(),this.h()},l(n){t=x(n,"DIV",{class:!0});var r=I(t);R(e.$$.fragment,r),i=E(r),r.forEach(d),this.h()},h(){w(t,"class","flex-none w-2/3 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/5 2xl:w-1/6 mr-8 mb-8 overflow-hidden")},m(n,r){j(n,t,r),T(e,t,null),v(t,i),l=!0},p(n,r){const s={};r&1&&(s.img=n[5].attributes),r&1&&(s.lazy=n[4]>2||n[2].attributes.Images.data.length+n[7]>6),e.$set(s)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){p(e.$$.fragment,n),l=!1},d(n){n&&d(t),U(e)}}}function G(o,t){let e,i,l,n=t[2].attributes.Nom+"",r,s,a,_,V,D,$,b=t[2].attributes.Images.data,c=[];for(let f=0;f<b.length;f+=1)c[f]=J(H(t,b,f));const X=f=>p(c[f],1,1,()=>{c[f]=null});let m=t[2].attributes.MontrePlansDansProjets&&O(t);return{key:o,first:null,c(){e=k("a"),i=k("div"),l=k("h2"),r=le(n),s=P(),a=k("div");for(let f=0;f<c.length;f+=1)c[f].c();_=P(),m&&m.c(),V=P(),this.h()},l(f){e=x(f,"A",{class:!0,href:!0});var u=I(e);i=x(u,"DIV",{class:!0});var h=I(i);l=x(h,"H2",{class:!0});var z=I(l);r=ae(z,n),z.forEach(d),h.forEach(d),s=E(u),a=x(u,"DIV",{class:!0});var y=I(a);for(let q=0;q<c.length;q+=1)c[q].l(y);_=E(y),m&&m.l(y),y.forEach(d),V=E(u),u.forEach(d),this.h()},h(){w(l,"class","font-normal"),w(i,"class","py-3 mb-5 prose sm:w-2/3 lg:w-1/2 border-b-2 border-zinc-900"),w(a,"class","flex w-full overflow-scroll"),w(e,"class","pb-20 cursor-pointer"),w(e,"href",D=M.getLocalizedSlug("projects",t[1])+"/"+B(t[2].attributes.Nom)),this.first=e},m(f,u){j(f,e,u),v(e,i),v(i,l),v(l,r),v(e,s),v(e,a);for(let h=0;h<c.length;h+=1)c[h].m(a,null);v(a,_),m&&m.m(a,null),v(e,V),$=!0},p(f,u){if(t=f,(!$||u&1)&&n!==(n=t[2].attributes.Nom+"")&&re(r,n),u&1){b=t[2].attributes.Images.data;let h;for(h=0;h<b.length;h+=1){const z=H(t,b,h);c[h]?(c[h].p(z,u),g(c[h],1)):(c[h]=J(z),c[h].c(),g(c[h],1),c[h].m(a,_))}for(S(),h=b.length;h<c.length;h+=1)X(h);N()}t[2].attributes.MontrePlansDansProjets?m?(m.p(t,u),u&1&&g(m,1)):(m=O(t),m.c(),g(m,1),m.m(a,null)):m&&(S(),p(m,1,1,()=>{m=null}),N()),(!$||u&3&&D!==(D=M.getLocalizedSlug("projects",t[1])+"/"+B(t[2].attributes.Nom)))&&w(e,"href",D)},i(f){if(!$){for(let u=0;u<b.length;u+=1)g(c[u]);g(m),$=!0}},o(f){c=c.filter(Boolean);for(let u=0;u<c.length;u+=1)p(c[u]);p(m),$=!1},d(f){f&&d(e),K(c,f),m&&m.d()}}}function ne(o){let t,e=[],i=new Map,l,n=o[0];const r=s=>s[2].id;for(let s=0;s<n.length;s+=1){let a=A(o,n,s),_=r(a);i.set(_,e[s]=G(_,a))}return{c(){t=k("div");for(let s=0;s<e.length;s+=1)e[s].c()},l(s){t=x(s,"DIV",{});var a=I(t);for(let _=0;_<e.length;_+=1)e[_].l(a);a.forEach(d)},m(s,a){j(s,t,a);for(let _=0;_<e.length;_+=1)e[_].m(t,null);l=!0},p(s,[a]){a&3&&(n=s[0],S(),e=te(e,a,r,1,s,n,i,t,se,G,null,A),N())},i(s){if(!l){for(let a=0;a<n.length;a+=1)g(e[a]);l=!0}},o(s){for(let a=0;a<e.length;a+=1)p(e[a]);l=!1},d(s){s&&d(t);for(let a=0;a<e.length;a+=1)e[a].d()}}}function ie(o,t,e){let{projects:i}=t,{lang:l}=t;return i=i.map(n=>{let r=n.attributes.Description.slice(0,500);return r=`${r.slice(0,r.lastIndexOf(" "))} ...`,{...n,attributes:{...n.attributes,shortDescription:r}}}),o.$$set=n=>{"projects"in n&&e(0,i=n.projects),"lang"in n&&e(1,l=n.lang)},[i,l]}class he extends Y{constructor(t){super(),Z(this,t,ie,ne,ee,{projects:0,lang:1})}}export{he as P};
