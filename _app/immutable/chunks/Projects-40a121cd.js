import{S as J,i as M,s as O,k as w,l as b,m as k,h as _,b as S,g as B,_ as F,d as C,f as y,t as z,q as G,a as D,r as K,c as E,n as g,J as p,u as Q,L as R,$ as T,w as U,x as W,y as X,z as Y}from"./index-faa1c9d4.js";import{i as V}from"./i18n-5472911a.js";import{s as q}from"./utils-5677564c.js";import{I as Z}from"./Image-b80ca624.js";function L(h,t,e){const r=h.slice();return r[2]=t[e],r[4]=e,r}function $(h,t,e){const r=h.slice();return r[5]=t[e],r[7]=e,r}function P(h){let t,e,r,f;return e=new Z({props:{img:h[5].attributes,sizes:`(max-width: 639px) 90vw,
                    (max-width: 767px) 75vw,
                    (max-width: 1023px) 50vw,
                    (max-width: 1279px) 40vw,
                    (max-width: 1535px) 30vw,
                    25vw`,src:"small",lazy:h[4]>2||h[7]>6,classString:"aspect-square object-cover saturate-0 hover:saturate-100"}}),{c(){t=w("div"),U(e.$$.fragment),r=D(),this.h()},l(l){t=b(l,"DIV",{class:!0});var c=k(t);W(e.$$.fragment,c),r=E(c),c.forEach(_),this.h()},h(){g(t,"class","flex-none w-2/3 sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/5 2xl:w-1/6 mr-8 mb-8 overflow-hidden")},m(l,c){S(l,t,c),X(e,t,null),p(t,r),f=!0},p(l,c){const s={};c&1&&(s.img=l[5].attributes),c&1&&(s.lazy=l[4]>2||l[7]>6),e.$set(s)},i(l){f||(y(e.$$.fragment,l),f=!0)},o(l){z(e.$$.fragment,l),f=!1},d(l){l&&_(t),Y(e)}}}function A(h,t){let e,r,f,l=t[2].attributes.Nom+"",c,s,a,m,I,v,d=t[2].attributes.Images.data,n=[];for(let o=0;o<d.length;o+=1)n[o]=P($(t,d,o));const H=o=>z(n[o],1,1,()=>{n[o]=null});return{key:h,first:null,c(){e=w("a"),r=w("div"),f=w("h2"),c=G(l),s=D(),a=w("div");for(let o=0;o<n.length;o+=1)n[o].c();m=D(),this.h()},l(o){e=b(o,"A",{class:!0,href:!0});var u=k(e);r=b(u,"DIV",{class:!0});var i=k(r);f=b(i,"H2",{class:!0});var x=k(f);c=K(x,l),x.forEach(_),i.forEach(_),s=E(u),a=b(u,"DIV",{class:!0});var N=k(a);for(let j=0;j<n.length;j+=1)n[j].l(N);N.forEach(_),m=E(u),u.forEach(_),this.h()},h(){g(f,"class","font-normal"),g(r,"class","py-3 mb-5 prose sm:w-2/3 lg:w-1/2 border-b-2 border-zinc-900"),g(a,"class","flex w-full overflow-scroll"),g(e,"class","pb-20 cursor-pointer"),g(e,"href",I=V.getLocalizedSlug("projects",t[1])+"/"+q(t[2].attributes.Nom)),this.first=e},m(o,u){S(o,e,u),p(e,r),p(r,f),p(f,c),p(e,s),p(e,a);for(let i=0;i<n.length;i+=1)n[i].m(a,null);p(e,m),v=!0},p(o,u){if(t=o,(!v||u&1)&&l!==(l=t[2].attributes.Nom+"")&&Q(c,l),u&1){d=t[2].attributes.Images.data;let i;for(i=0;i<d.length;i+=1){const x=$(t,d,i);n[i]?(n[i].p(x,u),y(n[i],1)):(n[i]=P(x),n[i].c(),y(n[i],1),n[i].m(a,null))}for(B(),i=d.length;i<n.length;i+=1)H(i);C()}(!v||u&3&&I!==(I=V.getLocalizedSlug("projects",t[1])+"/"+q(t[2].attributes.Nom)))&&g(e,"href",I)},i(o){if(!v){for(let u=0;u<d.length;u+=1)y(n[u]);v=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)z(n[u]);v=!1},d(o){o&&_(e),R(n,o)}}}function ee(h){let t,e=[],r=new Map,f,l=h[0];const c=s=>s[2].id;for(let s=0;s<l.length;s+=1){let a=L(h,l,s),m=c(a);r.set(m,e[s]=A(m,a))}return{c(){t=w("div");for(let s=0;s<e.length;s+=1)e[s].c()},l(s){t=b(s,"DIV",{});var a=k(t);for(let m=0;m<e.length;m+=1)e[m].l(a);a.forEach(_)},m(s,a){S(s,t,a);for(let m=0;m<e.length;m+=1)e[m].m(t,null);f=!0},p(s,[a]){a&3&&(l=s[0],B(),e=F(e,a,c,1,s,l,r,t,T,A,null,L),C())},i(s){if(!f){for(let a=0;a<l.length;a+=1)y(e[a]);f=!0}},o(s){for(let a=0;a<e.length;a+=1)z(e[a]);f=!1},d(s){s&&_(t);for(let a=0;a<e.length;a+=1)e[a].d()}}}function te(h,t,e){let{projects:r}=t,{lang:f}=t;return r=r.map(l=>{let c=l.attributes.Description.slice(0,500);return c=`${c.slice(0,c.lastIndexOf(" "))} ...`,{...l,attributes:{...l.attributes,shortDescription:c}}}),h.$$set=l=>{"projects"in l&&e(0,r=l.projects),"lang"in l&&e(1,f=l.lang)},[r,f]}class ne extends J{constructor(t){super(),M(this,t,te,ee,O,{projects:0,lang:1})}}export{ne as P};
